---
globs: "libs/**/frontend/**/ui/**/*.component.ts, libs/**/frontend/**/ui/**/*.component.html, libs/**/frontend/**/ui/**/*.component.scss, libs/**/frontend/**/ui/**/*.stories.ts"
alwaysApply: false
---

# Frontend UI Rules (Angular UI Libraries)

UI libraries contain purely presentational standalone components intended for reuse across features and apps.

> The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" are as described in RFC 2119.

## Separation of Concerns

- UI components **MUST NOT** contain business logic or state management.
- UI components **MUST** be stateless where feasible; accept data via `@Input()` and emit events via `@Output()`.
- UI libraries **MUST NOT** import from `feature` or `data-access` libraries; depend only on other UI or shared utilities.

## Performance & API Design

- Components **SHOULD** use `ChangeDetectionStrategy.OnPush` and `trackBy` for lists.
- Inputs/Outputs **MUST** be strongly typed and minimal.
- Components **SHOULD** support accessibility and theming via CSS variables/design tokens.

## Accessibility

- Follow WCAG 2.1 AA (roles, labels, focus order, keyboard interaction).

## Testing & Stories

- Each UI component **SHOULD** have Storybook stories covering states (default, loading, empty, error) and accessibility checks.
- Unit tests **SHOULD** validate rendering and interaction contracts (no store effects).

## Examples

```ts
// button.component.ts
@Component({
  selector: 'ui-button',
  standalone: true,
  changeDetection: ChangeDetectionStrategy.OnPush,
  template: `<button [disabled]="disabled" [ngClass]="variant">{{ label }}</button>`,
})
export class ButtonComponent {
  @Input() label = '';
  @Input() variant: 'primary' | 'secondary' = 'primary';
  @Input() disabled = false;
}
```

```ts
// button.stories.ts
import { Meta, StoryObj } from '@storybook/angular';
import { ButtonComponent } from './button.component';

export default { component: ButtonComponent, title: 'UI/Button' } satisfies Meta<ButtonComponent>;
export const Primary: StoryObj<ButtonComponent> = { args: { label: 'Save', variant: 'primary' } };
export const Disabled: StoryObj<ButtonComponent> = { args: { label: 'Save', disabled: true } };
```
