---
globs: "libs/**/shared/**/*.util.ts, libs/**/shared/**/*.types.ts, libs/**/shared/**/*.schema.ts"
alwaysApply: false
---

# Shared Utilities Rules

This ruleset governs shared, framework-agnostic utilities, types, and schemas used across scopes.

> The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” are as described in RFC 2119.

## General

- Shared code **MUST** be domain-agnostic and framework-agnostic.
- Shared libraries **MUST NOT** import from `frontend`, `backend`, `native`, or domain-specific libraries.

## Types & Schemas

- Types **MUST** be explicit and exported for reuse.
- Validation schemas **SHOULD** be colocated with types and ensure strict input validation.

## Utilities

- Utility functions **MUST** be pure and well-named; side effects are prohibited.
- Error messages **SHOULD** be actionable and free of sensitive data.

## Testing

- Utilities **MUST** have comprehensive unit tests including edge cases.

## Examples

```ts
// string.util.ts
export function isNonEmptyString(value: unknown): value is string {
  return typeof value === 'string' && value.trim().length > 0;
}
```

```ts
// schema.ts (zod)
import { z } from 'zod';
export const EmailSchema = z.string().email();
export type Email = z.infer<typeof EmailSchema>;
```
