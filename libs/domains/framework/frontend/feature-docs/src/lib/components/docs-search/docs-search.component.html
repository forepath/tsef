<div class="docs-search-container position-relative">
  <div class="input-group">
    <input
      type="text"
      class="form-control"
      placeholder="Search documentation..."
      [value]="searchQuery()"
      (input)="onSearchInput($event)"
      (focus)="onFocus()"
      (blur)="onBlur()"
      (keydown.enter)="onSearchClick()"
    />
    <button class="btn btn-primary" type="button" (click)="onSearchClick()">
      <i class="bi bi-search"></i>
    </button>
  </div>

  @if (showResults() && searchResults().length > 0) {
    <div class="search-results-dropdown">
      <div class="list-group">
        @for (result of searchResults(); track result.entry.path) {
          <button type="button" class="list-group-item list-group-item-action" (click)="onResultClick(result)">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">{{ result.entry.title }}</h6>
              <small class="text-muted">{{ result.score }}</small>
            </div>
            @if (result.entry.summary) {
              <p class="mb-1 small text-muted">{{ result.entry.summary }}</p>
            }
            @if (result.highlights.length > 0) {
              <small [innerHTML]="result.highlights[0]"></small>
            }
          </button>
        }
      </div>
      <div class="search-results-footer">
        <button type="button" class="btn btn-link btn-sm" (click)="onSearchClick()">View all results</button>
      </div>
    </div>
  } @else if (showResults() && searchQuery().trim().length > 0) {
    <div class="search-results-dropdown">
      <div class="list-group">
        <div class="list-group-item text-center text-muted">
          <small>No results found</small>
        </div>
      </div>
    </div>
  }
</div>
