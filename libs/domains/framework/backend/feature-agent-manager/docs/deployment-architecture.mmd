graph TB
    subgraph "Agent Manager"
        AC[AgentsDeploymentsController]
        AC --> |Uses| DS[DeploymentsService]
        DS --> |Uses| PPF[PipelineProviderFactory]
        DS --> |Stores| DCR[DeploymentConfigurationsRepository]
        DS --> |Stores| DRR[DeploymentRunsRepository]
        DS --> |Verifies| AR[AgentsRepository]
    end

    subgraph "Provider Factory"
        PPF --> |Manages| GP[GitHubProvider]
        PPF --> |Manages| GLP[GitLabProvider]
        PPF --> |Manages| FP[Future Providers...]
    end

    subgraph "GitHub Provider"
        GP --> |Calls| GHA[GitHub REST API]
        GHA --> |Returns| WR[Workflows/Runs/Logs]
    end

    subgraph "GitLab Provider"
        GLP --> |Calls| GLAPI[GitLab REST API]
        GLAPI --> |Returns| PR[Pipelines/Runs/Logs]
    end

    subgraph "Database"
        DCR --> |Stores| DCE[DeploymentConfigurationEntity]
        DRR --> |Stores| DRE[DeploymentRunEntity]
        AR --> |Stores| AE[AgentEntity]
        DCE -.->|References| AE
        DRE -.->|References| DCE
    end

    subgraph "Agent Service Integration"
        AS[AgentsService]
        AS --> |Creates/Updates| DS
        AS --> |Uses| AR
    end

    style AC fill:#e1f5ff
    style DS fill:#fff9c4
    style PPF fill:#f3e5f5
    style GP fill:#e8f5e9
    style GLP fill:#fff3e0
    style DCE fill:#c8e6c9
    style DRE fill:#c8e6c9
