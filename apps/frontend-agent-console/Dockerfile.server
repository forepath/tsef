# This file is generated by Nx.
# Build the docker image with `npx nx run frontend-agent-console:server-container-image`.
# Tip: Modify "server-container-image" options in project.json to change docker build args.
#
# Run the container with `nx docker:run frontend-agent-console -p 4200:4200`.
# Exposes the frontend server on port 4200.
# Uses Alpine-based Node.js image for smaller size and faster builds.
#
FROM docker.io/node:22.12.0-alpine

# Environment variables for the frontend server
ENV HOST=0.0.0.0
ENV PORT=4200
ENV NODE_ENV=production
ENV DEFAULT_LOCALE=en

# Set working directory
WORKDIR /app

# Expose ports for the frontend server
EXPOSE ${PORT}

# Copy package files first for better layer caching
COPY package*.json ./

# Install dependencies
RUN npm ci && npm cache clean --force

# Copy application code
COPY . /app

# Start the application
CMD [ "node", "server.cjs" ]
